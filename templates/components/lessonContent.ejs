<!-- Import the function that transforms the Latex -->
<% include("./latexRender") %>
<div class="w3-display-container" style="height:50px;">
    <div class=" w3-display-left w3-xlarge">
        <b>Leçon:</b> <%= currentLesson.title %>
    </div>
    <% if (lessonContent.questions.length > 0) {
        const questionPath = 
        rootPath
        + "/"
        + subjectContent.id
        + "/"
        + currentLesson.id.split('/')[1]
        + "/question1.html";
        %>
    <div class=" w3-display-right">
        <a href=<%= questionPath.split(' ').join('%20') %>>
            <button class="w3-button w3-round w3-white w3-border w3-border-blue">
                Accès aux questions
            </button>
        </a>
    </div>
    <% } %>
</div>
<div class="w3-container">
    <div id="myCarousel" class="carousel slide" data-interval="false">
        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            <%  let first = true;
                for(const page of lessonContent.pages) { 
                    const pageHtml = "../../data/" + page;
                    let pageContent = include(pageHtml);  <!-- pageContent is of type string -->

                    const folder =  lessonContent.id + "/latex/"
                    const latexFolderPath = dataPath + folder;
                    <!-- fonction défini dans latexRender -->
                    pageContent = latexReplacement(pageContent, latexFolderPath)

                    if (first == true) {
                        first = false; %>
            <div class="item active" style="text-align: left; margin-left: 10%; margin-right: 10%;">
                <%-pageContent%>
                <br />
                page 1 / <%=lessonContent.pages.length%>
            </div>
            <% } else { %>
            <div class="item" style="text-align: left; margin-left: 10%;  margin-right: 10%;">
                <%-pageContent%>
                <br />
                page <%= (1 +lessonContent.pages.indexOf(page)) %> / <%=lessonContent.pages.length%>
            </div>
            <% }
        } %>
        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev"
            style="background-image: none; color:blue; left:-2%;">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next"
            style="background-image: none; color:blue; right:-2%;">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>